# 车辆保险理赔数据分析过程描述

   目前项目中有很多python文件，由于项目在迭代过程中，需求变化较快，根据之前多次数据计算的需求迭代产生的代码文件，每个文件的整体流程是类似的，区别是每次新数据来以后，计算过程中会增加或减少个别数据类型，所以产生了很多的代码文件，可以只看其中个别文件，其他文件结构都是类似的

## 一、使用工具说明

* 用pandas 进行数据清洗及分析
* 用networkx进行图的建立
* 用python-louvain团伙发现
* 用matplotlib把团伙（子图）画成图片

## 二、以代码procNewData_debug.py 为例，说明整个程序的工作过程

### 1. 数据清洗
* 代码17～51行，建立保存文件的目录结构
* 代码52～65行，根据samplenum，从每个csv读取相应数量的数据。由于数据量比较大，在测试过程中，可以设置samplenum为一个较小的数，进行代码调试，如果是0的话，会把数据全部读取到内存中
* 代码66～85行，根据要求，去除不合理的数据，并进行一定的输出

### 2. 构建图
* 代码87～131行，挑选出建立图中的节点
* 代码133～138行，挑选出图的所有边
* 代码140～146行，建立大图![avatar](长安数据格式.jpg)
* 代码148～176行，打印建图用时，当前图中的各种节点数量等信息
* 代码178～240行，根据组成大图的各个边上的两个节点的类型，给大图中的所有节点增加属性，用于后续的子图节点的类型分析

### 3. 分析子图
* 代码242～251行，计算当前图中的所有子图，得到子图数量
* 代码253～666行，针对每个子图的情况，根据子图中是否含有环，具体成环的节点的属性等，进行统计，用matplotlib画子图，保存到对应文件夹的目录中
